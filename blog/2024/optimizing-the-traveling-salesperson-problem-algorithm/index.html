<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Optimizing the Traveling Salesperson Problem Algorithm | Chencheng Li </title> <meta name="author" content="Chencheng Li"> <meta name="description" content="The Traveling Salesperson Problem (TSP) is a classic optimization problem with numerous real-world applications, from logistics to manufacturing. In this blog post, we’ll explore a brute-force approach to solving the TSP using a recursive algorithm, laying the foundation for more advanced optimization techniques."> <meta name="keywords" content="chencheng-li, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A7%91%F0%9F%8F%BB%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://chencheng-li.github.io/blog/2024/optimizing-the-traveling-salesperson-problem-algorithm/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Chencheng</span> Li </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Optimizing the Traveling Salesperson Problem Algorithm</h1> <p class="post-meta"> Created in June 04, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/ai"> <i class="fa-solid fa-hashtag fa-sm"></i> AI,</a>   <a href="/blog/tag/python"> <i class="fa-solid fa-hashtag fa-sm"></i> Python,</a>   <a href="/blog/tag/optimization"> <i class="fa-solid fa-hashtag fa-sm"></i> Optimization</a>   ·   <a href="/blog/category/ai"> <i class="fa-solid fa-tag fa-sm"></i> AI</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Key takeaways from this post:</p> <ol> <li>The Traveling Salesperson Problem is a classic optimization problem with many real-world applications.</li> <li>A brute force approach to solving the TSP involves generating all possible permutations of the destinations and calculating the cost(e.g., distance or emissions) for each permutation.</li> <li>Recursive algorithms can be used to generate permutations and solve the TSP.</li> <li>While brute force approaches are simple to understand and implement, they become impractical for larger problem sizes.</li> </ol> <p>The Traveling Salesperson Problem (TSP) is a classic optimization problem with numerous real-world applications, from logistics to manufacturing. In this blog post, we’ll explore a brute-force approach to solving the TSP using a recursive algorithm, laying the foundation for more advanced optimization techniques.</p> <hr> <h1 id="the-problem-shipping-pineapples"><strong>The Problem: Shipping Pineapples</strong></h1> <blockquote> <p>Imagine that you’ve been assigned the task to plan the route of a container ship loaded with pineapples. The ship starts in Panama, loaded with delicious Fairtrade pineapples. There are four other ports, New York, Casablanca, Amsterdam, and Helsinki, where pineapple-craving citizens are eagerly waiting. The ship must visit each of the four destination ports exactly once, but the order in which each port is visited is free. The goal is to minimize the carbon emissions, which means that a shorter route is better than a longer one.</p> </blockquote> <h2 id="listing-pineapple-routes">Listing Pineapple Routes</h2> <p>To solve the TSP, we start by listing all possible routes, or permutations, of the ports. We can use a recursive algorithm to generate these permutations:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">portnames</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">PAN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">AMS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">CAS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">NYC</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HEL</span><span class="sh">"</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
    <span class="c1"># Write your recursive code here
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">ports</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># check if there is not port in ports
</span>        <span class="c1"># Print the port names in route when the recursion terminates
</span>        <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">([</span><span class="n">portnames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">route</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)):</span>
            <span class="c1"># Add the current port into the route to become a new route
</span>            <span class="n">next_route</span> <span class="o">=</span> <span class="n">route</span> <span class="o">+</span> <span class="p">[</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="c1"># Remove the current port from the ports
</span>            <span class="n">remaining_ports</span> <span class="o">=</span> <span class="n">ports</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># A method that remove the current ports
</span>            <span class="c1"># Recursively generate permutations with the updated route and remaining ports
</span>            <span class="nf">permutations</span><span class="p">(</span><span class="n">next_route</span><span class="p">,</span> <span class="n">remaining_ports</span><span class="p">)</span>

<span class="c1"># This will start the recursion with 0 ("PAN") as the first stop
</span><span class="nf">permutations</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">portnames</span><span class="p">))))</span>

</code></pre></div></div> <p>This recursive algorithm works by:</p> <ol> <li>Starting with a route containing only the first port (Panama) and a list of the remaining ports.</li> <li>If there are no remaining ports, the recursion terminates, and the current route is printed.</li> <li>If there are remaining ports, the algorithm iterates through each one, adding it to the current route and removing it from the list of remaining ports.</li> <li>The algorithm then recursively calls itself with the updated route and remaining ports.</li> <li>This process continues until all possible permutations have been generated.</li> </ol> <p>Let’s examine the behavior of this algorithm:</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/tsp_algorithm_visualization_1-480.webp 480w,/assets/img/tsp_algorithm_visualization_1-800.webp 800w,/assets/img/tsp_algorithm_visualization_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/tsp_algorithm_visualization_1.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="TSP Algorithm Visualization 1" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>We keep removing <code class="language-plaintext highlighter-rouge">port</code> from <code class="language-plaintext highlighter-rouge">ports</code> and adding to the <code class="language-plaintext highlighter-rouge">route</code> then keeping the recursive when we reach the first end (which means we print out our first route) :</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/tsp_algorithm_visualization_2-480.webp 480w,/assets/img/tsp_algorithm_visualization_2-800.webp 800w,/assets/img/tsp_algorithm_visualization_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/tsp_algorithm_visualization_2.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="TSP Algorithm Visualization 2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>We go back to the previous branch and do the recursive from there ([0, 1, 2, 3] we finish this one from the previous and start from the second <code class="language-plaintext highlighter-rouge">i</code> from for which is [0, 1, 2, 4])</p> <p>Then we start a new <code class="language-plaintext highlighter-rouge">for</code> , choosing <code class="language-plaintext highlighter-rouge">3</code> as the first one and printing</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/tsp_algorithm_visualization_3-480.webp 480w,/assets/img/tsp_algorithm_visualization_3-800.webp 800w,/assets/img/tsp_algorithm_visualization_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/tsp_algorithm_visualization_3.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="TSP Algorithm Visualization 3" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>And so on and so on.</p> <hr> <p>Let’s look at the example solution from the course:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">([</span><span class="n">portnames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">route</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)):</span>
		        <span class="c1"># use one line to achieve it
</span>            <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="o">+</span><span class="p">[</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">ports</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>

<span class="nf">permutations</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">portnames</span><span class="p">))))</span>
</code></pre></div></div> <p>It’s crazy neat, we learn from it that we can manipulate our variable in parameters.</p> <h2 id="calculating-pineapple-route-emissions">Calculating Pineapple Route Emissions</h2> <p>Now we add more details to our problem:</p> <blockquote> <p>Having listed the alternatives, next we can calculate the carbon emissions for each of them. Below you’ll find the distances between the ports in kilometers in a five-by-five table.</p> <table> <thead> <tr> <th> </th> <th>PAN</th> <th>AMS</th> <th>CAS</th> <th>NY</th> <th>HEL</th> </tr> </thead> <tbody> <tr> <td>PAN</td> <td>0</td> <td>8943</td> <td>8019</td> <td>3652</td> <td>10545</td> </tr> <tr> <td>AMS</td> <td>8943</td> <td>0</td> <td>2619</td> <td>6317</td> <td>2078</td> </tr> <tr> <td>CAS</td> <td>8019</td> <td>2619</td> <td>0</td> <td>5836</td> <td>4939</td> </tr> <tr> <td>NY</td> <td>3652</td> <td>6317</td> <td>5836</td> <td>0</td> <td>7825</td> </tr> <tr> <td>HEL</td> <td>10545</td> <td>2078</td> <td>4939</td> <td>7825</td> <td>0</td> </tr> </tbody> </table> <p>Let’s assume that the boat is relatively modern and produces 0.020 kg of CO2 emissions per kilometer for the amount of pineapples that we are shipping. Thus, you can calculate the emissions caused by traveling from Panama to Amsterdam by first looking up the distance in the first row, second column of the table (highlighted in the above table): 8943 km, and then multiplying this with 0.020kg/km to get 178.9 kg.</p> </blockquote> <p>Here’s the updated code that calculates the emissions for each route and keeps track of the route with the lowest emissions:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">portnames</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">PAN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">AMS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">CAS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">NYC</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HEL</span><span class="sh">"</span><span class="p">]</span>

<span class="c1"># https://sea-distances.org/
# nautical miles converted to km
</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8943</span><span class="p">,</span><span class="mi">8019</span><span class="p">,</span><span class="mi">3652</span><span class="p">,</span><span class="mi">10545</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">8943</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2619</span><span class="p">,</span><span class="mi">6317</span><span class="p">,</span><span class="mi">2078</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">8019</span><span class="p">,</span><span class="mi">2619</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5836</span><span class="p">,</span><span class="mi">4939</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">3652</span><span class="p">,</span><span class="mi">6317</span><span class="p">,</span><span class="mi">5836</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7825</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">10545</span><span class="p">,</span><span class="mi">2078</span><span class="p">,</span><span class="mi">4939</span><span class="p">,</span><span class="mi">7825</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">]</span>

<span class="c1"># https://timeforchange.org/co2-emissions-shipping-goods
# assume 20g per km per metric ton (of pineapples)
</span>
<span class="n">co2</span> <span class="o">=</span> <span class="mf">0.020</span>

<span class="c1"># DATA BLOCK ENDS
</span>
<span class="c1"># these variables are initialised to nonsensical values
# your program should determine the correct values for them
</span><span class="n">smallest</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">bestroute</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
    <span class="c1"># write the recursive function here
</span>    <span class="c1"># Remember to calculate the emissions of the route as the recursion ends
</span>    <span class="c1"># and keep track of the route with the lowest emissions
</span>    <span class="k">global</span> <span class="n">smallest</span><span class="p">,</span> <span class="n">bestroute</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ports</span><span class="p">:</span>
        <span class="n">emissions</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># This `for` part is equivalent to:
</span>        <span class="c1"># emissions = co2*(D[route[0]][route[1]] + D[route[1]][route[2]] + D[route[2]][route[3]] + D[route[3]][route[4]])
</span>        <span class="c1"># calculate the emissions which is the total distance from the whole route then * co2
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">emissions</span> <span class="o">+=</span> <span class="n">D</span><span class="p">[</span><span class="n">route</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">route</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">emissions</span> <span class="o">*=</span> <span class="n">co2</span>
        <span class="k">if</span> <span class="n">emissions</span> <span class="o">&lt;</span> <span class="n">smallest</span><span class="p">:</span>
            <span class="n">smallest</span> <span class="o">=</span> <span class="n">emissions</span>
            <span class="n">bestroute</span> <span class="o">=</span> <span class="n">route</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)):</span>
            <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span> <span class="o">+</span> <span class="p">[</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">ports</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Do not edit any (global) variables using this function, as it will mess up the testing
</span>    <span class="c1"># This will start the recursion
</span>    <span class="nf">permutations</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">portnames</span><span class="p">))))</span>

    <span class="c1"># print the best route and its emissions
</span>    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">([</span><span class="n">portnames</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="k">for</span> <span class="n">I</span> <span class="ow">in</span> <span class="n">bestroute</span><span class="p">])</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> %.1f kg</span><span class="sh">"</span> <span class="o">%</span> <span class="n">smallest</span><span class="p">)</span>

<span class="nf">main</span><span class="p">()</span>
</code></pre></div></div> <p>Let’s check out the example solution:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">portnames</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">PAN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">AMS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">CAS</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">NYC</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HEL</span><span class="sh">"</span><span class="p">]</span>

<span class="n">D</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8943</span><span class="p">,</span><span class="mi">8019</span><span class="p">,</span><span class="mi">3652</span><span class="p">,</span><span class="mi">10545</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">8943</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2619</span><span class="p">,</span><span class="mi">6317</span><span class="p">,</span><span class="mi">2078</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">8019</span><span class="p">,</span><span class="mi">2619</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5836</span><span class="p">,</span><span class="mi">4939</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">3652</span><span class="p">,</span><span class="mi">6317</span><span class="p">,</span><span class="mi">5836</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7825</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">10545</span><span class="p">,</span><span class="mi">2078</span><span class="p">,</span><span class="mi">4939</span><span class="p">,</span><span class="mi">7825</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">]</span>

<span class="n">co2</span> <span class="o">=</span> <span class="mf">0.020</span>

<span class="n">smallest</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">bestroute</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">smallest</span><span class="p">,</span> <span class="n">bestroute</span>
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">co2</span> <span class="o">*</span> <span class="nf">sum</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">route</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">route</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="n">smallest</span><span class="p">:</span>
            <span class="n">smallest</span> <span class="o">=</span> <span class="n">score</span>
            <span class="n">bestroute</span> <span class="o">=</span> <span class="n">route</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">ports</span><span class="p">)):</span>
            <span class="nf">permutations</span><span class="p">(</span><span class="n">route</span><span class="o">+</span><span class="p">[</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">ports</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">ports</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="nf">permutations</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">portnames</span><span class="p">))))</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">([</span><span class="n">portnames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bestroute</span><span class="p">])</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> %.1f kg</span><span class="sh">"</span> <span class="o">%</span> <span class="n">smallest</span><span class="p">)</span>

<span class="nf">main</span><span class="p">()</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">score</span> <span class="o">=</span> <span class="n">co2</span> <span class="o">*</span> <span class="nf">sum</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">route</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">route</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
</code></pre></div></div> <h2 id="a-note-on-zip">A Note on zip()</h2> <p>In the example solution, you might have noticed the use of <code class="language-plaintext highlighter-rouge">zip()</code> to calculate the total distance:</p> <p>Let’s say you have the following route:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>•	route[:-1] would be [0, 2, 3]
•	route[1:] would be [2, 3, 1]
•	zip(route[:-1], route[1:]) would produce pairs (0, 2), (2, 3), (3, 1)
</code></pre></div></div> <h1 id="conclusion">Conclusion</h1> <p>In this blog post, we explored a brute force approach to solve the Traveling Salesperson Problem using a recursive algorithm. We started by generating all possible permutations of the ports and then calculated the carbon emissions for each route using a distance table.</p> <p>While this approach works, it becomes increasingly inefficient as the number of ports grows, as it generates and evaluates all possible permutations. In future posts, we’ll explore more advanced optimization techniques that can solve the TSP more efficiently.</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Chencheng Li. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/tabs.min.js?b8748955e1076bbe0dabcf28f2549fdc"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let theme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===theme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=document.querySelector(".navbar-collapse");e.classList.contains("show")&&e.classList.remove("show"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-teaching",title:"teaching",description:"Materials for courses you taught. Replace this text with your description.",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"post-optimizing-the-traveling-salesperson-problem-algorithm",title:"Optimizing the Traveling Salesperson Problem Algorithm",description:"The Traveling Salesperson Problem (TSP) is a classic optimization problem with numerous real-world applications, from logistics to manufacturing. In this blog post, we\u2019ll explore a brute-force approach to solving the TSP using a recursive algorithm, laying the foundation for more advanced optimization techniques.",section:"Posts",handler:()=>{window.location.href="/blog/2024/optimizing-the-traveling-salesperson-problem-algorithm/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"posts-optimizing-the-traveling-salesperson-problem-algorithm",title:"Optimizing the Traveling Salesperson Problem Algorithm",description:"The Traveling Salesperson Problem (TSP) is a classic optimization problem with numerous real-world applications, from logistics to manufacturing. In this blog post, we\u2019ll explore a brute-force approach to solving the TSP using a recursive algorithm, laying the foundation for more advanced optimization techniques.",section:"Posts",handler:()=>{window.location.href="/blog/2024/optimizing-the-traveling-salesperson-problem-algorithm/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%63%68%6C%33%32%31@%75%63%73%64.%65%64%75","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> </body> </html>